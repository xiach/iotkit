webpackJsonp([40],{"5pS4":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"\n.tips[data-v-3aeda13c] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.notes[data-v-3aeda13c] {\r\n    color: #999;\n}\n.btn-commit[data-v-3aeda13c] {\r\n    text-align: center;\n}\n.allroles[data-v-3aeda13c] {\r\n    margin-left: 100px;\r\n    margin-bottom: 1rem;\n}\r\n",""])},"6zsL":function(e,t,a){var r=a("5pS4");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("2ec6c94c",r,!0,{})},CWBW:function(e,t,a){"use strict";function r(e){a("6zsL")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("UOHp"),i={data:function(){return{active:0,isChange:!1,loading:!1,images:[],editFormRules:{server:[{required:!0,message:this.$t("common.holderInput"),trigger:"blur"}],image:[{required:!0,message:this.$t("common.holderInput"),trigger:"change"}],name:[{required:!0,message:this.$t("common.holderInput"),trigger:"blur"}]},editForm:{server:"",image:[],name:"",addr:"",phone:"",email:""}}},computed:{types:function(){return[{key:"APP",label:this.$t("cloud.APP")},{key:"PUB",label:this.$t("cloud.PUB")}]}},mounted:function(){var e=this,t=this,a=[],r=[],i=[];o.a.getAllImages().then(function(o){o.data.result.forEach(function(e){var t=null;"basic"==e.feature?t=a:"advanced"==e.feature?t=r:"customized"==e.feature&&(t=i),t.push({value:e.id,label:e.version+"("+e.memo+")"})}),t.images=[{value:"basic",label:e.$t("cloud.basic"),children:a},{value:"advanced",label:e.$t("cloud.advanced"),children:r},{value:"customized",label:e.$t("cloud.customized"),children:i}]}).catch(function(e){}),this.$route.query.id&&(this.isChange=!0,o.a.getCloud(this.$route.query.id).then(function(e){t.editForm.server=e.data.server,t.editForm.version=e.data.version,t.editForm.capability=e.data.capability,t.editForm.name=e.data.name,t.editForm.addr=e.data.addr,t.editForm.phone=e.data.phone,t.editForm.email=e.data.email}).catch(function(e){}))},methods:{backForm:function(e){this.$router.back(-1)},resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.editForm,r=void 0;r=t.isChange?o.a.updateCloud(t.$route.query.id,a.image[1],a.name,a.addr,a.phone,a.email):o.a.createCloud(a.server,a.image[1],a.name,a.addr,a.phone,a.email),t.loading=!0,r.then(function(e){t.loading=!1,t.$message.success(t.$t("common.tipSuccess")),t.$router.push({path:"/cloudList"})}).catch(function(e){t.loading=!1})})}}},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tips"},[a("p",[e._v(e._s(e.$t("route.cloudApply")))])]),e._v(" "),a("div",{staticClass:"editForm"},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:e.$t("cloud.server"),prop:"server"}},[a("el-input",{attrs:{placeholder:e.$t("common.holderInput"),readonly:e.isChange},model:{value:e.editForm.server,callback:function(t){e.$set(e.editForm,"server",t)},expression:"editForm.server"}}),e._v(" "),a("span",{staticClass:"notes"},[e._v(e._s(e.$t("cloud.servertip")))])],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("cloud.version"),prop:"image"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{"expand-trigger":"hover",options:e.images,placeholder:e.$t("common.holderSelect")},model:{value:e.editForm.image,callback:function(t){e.$set(e.editForm,"image",t)},expression:"editForm.image"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("cloud.name"),prop:"name"}},[a("el-input",{attrs:{placeholder:e.$t("common.holderInput")},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("cloud.addr"),prop:"addr"}},[a("el-input",{attrs:{placeholder:e.$t("common.holderInput")},model:{value:e.editForm.addr,callback:function(t){e.$set(e.editForm,"addr",t)},expression:"editForm.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("cloud.phone"),prop:"phone"}},[a("el-input",{attrs:{placeholder:e.$t("common.holderInput")},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("cloud.email"),prop:"email"}},[a("el-input",{attrs:{placeholder:e.$t("common.holderInput")},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),e._v(" "),a("div",{staticClass:"btn-commit"},[e.isChange?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.backForm("editForm")}}},[e._v(e._s(e.$t("common.back")))]):e._e(),e._v(" "),e.isChange?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.resetForm("editForm")}}},[e._v(e._s(e.$t("common.reset")))]),e._v(" "),a("el-button",{attrs:{type:"danger",loading:e.loading},on:{click:function(t){e.submitForm("editForm")}}},[e._v(e._s(e.$t("common.save")))])],1)],1)],1)])},l=[],d={render:n,staticRenderFns:l},s=d,m=a("VU/8"),c=r,u=m(i,s,!1,c,"data-v-3aeda13c",null);t.default=u.exports}});