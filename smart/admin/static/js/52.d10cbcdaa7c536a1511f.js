webpackJsonp([52],{IA0q:function(t,e,a){var n=a("ycK0");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("61772c7c",n,!0,{})},KqxJ:function(t,e,a){"use strict";function n(t){a("IA0q")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("nv77"),i=a("xV2B"),r=a("UgCr"),l=a("XhSL"),o=(a("4UDB"),a("80cc"),a("Oq2I"),a("miEh"),{components:{IEcharts:l.a},data:function(){var t=function(t){return t.max+10};return{listLoading:!1,cntToday:"",daterange:[],tenants:[],tenantId:"all",products:[],prodId:"all",line:{title:{text:this.$t("statistics.trend"),left:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value",max:t},series:[{type:"line",smooth:!0,name:this.$t("statistics.onlineToday"),data:[]}]}}},mounted:function(){var t=this,e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),this.daterange=[a,e],this.products=[],r.a.getAllProducts().then(function(e){t.products=e.data.result,t.products.unshift({id:"all"})}).catch(function(t){}),s.a.getAllTenants().then(function(e){t.tenants=e.data.result,t.tenants.unshift({id:"all"})}).catch(function(t){})},methods:{getProductLabel:function(t){return"all"==t.id?this.$t("statistics.allProducts"):t.model+"("+t.species+")"},getTenantLabel:function(t){return"all"==t.id?this.$t("statistics.allTenants"):t.company},handleChange:function(t){},handleSearch:function(){var t=this,e=this,a=this.daterange[0],n=this.daterange[1],s=new Date,r=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),l=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),o={category:"online",starttime:r,endtime:l};for("all"!=this.tenantId&&(o.tenantId=this.tenantId),"all"!=this.prodId&&(o.productId=this.prodId),this.line.xAxis.data=[],s.setTime(a.getTime());n.getTime()>=s;){var c=s.getFullYear(),d=s.getMonth()+1,u=s.getDate();this.line.xAxis.data.push(c+"-"+(d<10?"0"+d:d)+"-"+(u<10?"0"+u:u)),s.setDate(s.getDate()+1)}this.cntToday="",this.listLoading=!0,this.line.series[0].data=[],i.a.getDeviceStatistics(o).then(function(a){e.$message.success(e.$t("common.tipSuccess")),t.cntToday=a.data.today;var n=a.data.result,s=[];t.line.series[0].data=[],t.line.xAxis.data.forEach(function(t){var e=0;n.forEach(function(a){a.date==t&&(e=a.count)}),s.push({value:e,name:t})}),t.line.series[0].data=s,t.listLoading=!1}).catch(function(e){t.listLoading=!1})}}}),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tips"},[a("p",[t._v(t._s(t.$t("route.online")))])]),t._v(" "),a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select",model:{value:t.tenantId,callback:function(e){t.tenantId=e},expression:"tenantId"}},[t._l(t.tenants,function(e){return[a("el-option",{key:e.id,attrs:{label:t.getTenantLabel(e),value:e.id}})]})],2),t._v(" "),a("el-select",{staticClass:"handle-select",model:{value:t.prodId,callback:function(e){t.prodId=e},expression:"prodId"}},[t._l(t.products,function(e){return[a("el-option",{key:e.id,attrs:{label:t.getProductLabel(e),value:e.id}})]})],2),t._v(" "),a("el-date-picker",{staticClass:"handle-daterange",attrs:{type:"daterange","range-separator":t.$t("statistics.to"),"start-placeholder":t.$t("statistics.starttime"),"end-placeholder":t.$t("statistics.endtime")},on:{change:t.handleChange},model:{value:t.daterange,callback:function(e){t.daterange=e},expression:"daterange"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:t.listLoading},on:{click:t.handleSearch}},[t._v(t._s(t.$t("common.search")))])],1),t._v(" "),a("div",{staticClass:"tips"},[a("p",[t._v(t._s(t.$t("statistics.tipActivated")))])]),t._v(" "),a("el-card",{staticClass:"box-card tips",attrs:{shadow:"always"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[t._v(t._s(t.$t("statistics.activeNow")))])],1),t._v(" "),a("el-row",{staticClass:"count",attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[t._v(t._s(t.cntToday))])],1)],1),t._v(" "),a("div",{staticClass:"echarts-line"},[a("IEcharts",{attrs:{option:t.line}})],1)],1)},d=[],u={render:c,staticRenderFns:d},h=u,p=a("VU/8"),g=n,v=p(o,h,!1,g,"data-v-28e2e424",null);e.default=v.exports},ycK0:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.tips[data-v-28e2e424] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.handle-box[data-v-28e2e424]{\r\n    margin-bottom: 20px;\n}\n.handle-select[data-v-28e2e424]{\r\n    width: 250px;\n}\n.echarts-line[data-v-28e2e424] {\r\n    margin-top: 2rem;\r\n    width: 100%;\r\n    height: 400px;\n}\n.box-card[data-v-28e2e424] {\r\n    width: 20%;\r\n    text-align: center;\n}\n.count[data-v-28e2e424] {\r\n    font-size: 36px;\r\n    color: #d9534f;\n}\r\n",""])}});