webpackJsonp([27],{"2fax":function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"\n.tips[data-v-6df8be05] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\r\n",""])},"aI/R":function(t,e,i){var o=i("2fax");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("739c1034",o,!0,{})},jHrD:function(t,e,i){"use strict";function o(t){i("aI/R")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),r=i("cs1d"),s=i("NYxO"),c={data:function(){return{listLoading:!0,contractId:null,is_hack:!1,editFormVisible:!1,editLoading:!1,editFormRules:{memo:[{required:!0,message:this.$t("common.holderInput"),trigger:"blur"}],result:[{required:!0,message:this.$t("common.holderSelect"),trigger:"change"}]},editForm:{result:"",memo:""}}},computed:a()({},Object(s.c)(["contracts"]),{results:function(){return this.is_hack?[{key:"new",label:this.$t("contract.new")},{key:"auditing",label:this.$t("contract.audit")},{key:"approved",label:this.$t("contract.approve")},{key:"rejected",label:this.$t("contract.reject")}]:[{key:"approved",label:this.$t("contract.approved")},{key:"rejected",label:this.$t("contract.rejected")}]}}),mounted:function(){this.updateContracts()},methods:{updateContracts:function(){var t=this;this.listLoading=!0,this.$store.dispatch("GetContracts").then(function(e){t.listLoading=!1}).catch(function(e){t.listLoading=!1})},statusFormatter:function(t,e){return"new"==t.status?this.$t("contract.new"):"auditing"==t.status?this.$t("contract.audit"):"approved"==t.status?this.$t("contract.approve"):"rejected"==t.status?this.$t("contract.reject"):void 0},getTag:function(t){return"new"==t?"warning":"auditing"==t?"info":"approved"==t?"success":"rejected"==t?"danger":void 0},handleView:function(t,e){this.$router.push({path:"/tenantContractDetail",query:{id:this.contracts[t].id,status:this.contracts[t].status,agreementId:this.contracts[t].agreementId}})},handleSign:function(t,e){this.contractId=this.contracts[t].id,this.is_hack=!1,this.editForm.result="",this.editForm.memo="",this.editFormVisible=!0},editSubmit:function(t){var e=this,i=this,o=this.editForm;i.$refs[t].validate(function(t){t&&(i.editLoading=!0,r.a.auditContract(e.contractId,o.result,o.memo).then(function(t){i.editLoading=!1,i.editFormVisible=!1,i.updateContracts(),e.$message.success(e.$t("common.tipSuccess"))}).catch(function(t){i.editLoading=!1,i.editFormVisible=!1}))})},closeDlg:function(){this.editFormVisible=!1},handleHack:function(t,e){var i=this;this.$confirm(this.$t("common.hackTip"),this.$t("common.tip"),{type:"warning"}).then(function(){i.onHack(t,e)}).catch(function(){})},onHack:function(t,e){this.contractId=this.contracts[t].id,this.is_hack=!0,this.editForm.result="",this.editForm.memo="",this.editFormVisible=!0}}},l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"tips"},[i("p",[t._v(t._s(t.$t("route.tenantContract")))])]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.contracts,border:"",strip:"",size:"mini"}},[i("el-table-column",{attrs:{type:"index",width:"40"}}),t._v(" "),i("el-table-column",{attrs:{prop:"tenant",label:t.$t("contract.company"),width:"300"}}),t._v(" "),i("el-table-column",{attrs:{prop:"initiation_date",label:t.$t("contract.initiation_date"),width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"effective_to",label:t.$t("contract.effective_to"),width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"agreement",label:t.$t("contract.mode"),width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:t.$t("contract.status"),formatter:t.statusFormatter,width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t.getTag(e.row.status)}},[t._v(t._s(t.statusFormatter({status:e.row.status})))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"memo",label:t.$t("contract.memo")}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("common.operation"),width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button-group",[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){t.handleView(e.$index,e.row)}}},[t._v(t._s(t.$t("contract.view")))]),t._v(" "),"auditing"==e.row.status?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.handleSign(e.$index,e.row)}}},[t._v(t._s(t.$t("tenant.auditing")))]):t._e(),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.handleHack(e.$index,e.row)}}},[t._v(t._s(t.$t("common.hack")))])],1)]}}])})],1),t._v(" "),t.editFormVisible?i("el-dialog",{attrs:{title:t.$t("tenant.auditing"),visible:t.editFormVisible,"close-on-click-modal":!1,"before-close":t.closeDlg}},[i("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px",rules:t.editFormRules}},[i("el-form-item",{attrs:{label:t.$t("tenant.result"),prop:"result"}},[i("el-select",{staticClass:"handle-select",attrs:{placeholder:t.$t("common.holderSelect")},model:{value:t.editForm.result,callback:function(e){t.$set(t.editForm,"result",e)},expression:"editForm.result"}},[t._l(t.results,function(t){return[i("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})]})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("tenant.memo"),prop:"memo"}},[i("el-input",{model:{value:t.editForm.memo,callback:function(e){t.$set(t.editForm,"memo",e)},expression:"editForm.memo"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.closeDlg}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"danger",loading:t.editLoading},on:{click:function(e){t.editSubmit("editForm")}}},[t._v(t._s(t.$t("common.commit")))])],1)],1):t._e()],1)},d=[],u={render:l,staticRenderFns:d},m=u,h=i("VU/8"),p=o,f=h(c,m,!1,p,"data-v-6df8be05",null);e.default=f.exports}});