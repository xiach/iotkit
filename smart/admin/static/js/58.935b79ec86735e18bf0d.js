webpackJsonp([58],{D9Hh:function(e,t,o){t=e.exports=o("FZ+f")(!1),t.push([e.i,"\n.tips[data-v-1b0a8b96] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\r\n",""])},h60I:function(e,t,o){"use strict";function i(e){o("oSN0")}Object.defineProperty(t,"__esModule",{value:!0});var a=o("UOHp"),n={data:function(){return{listLoading:!1,images:[],total:0,pageSize:20,editFormVisible:!1,editLoading:!1,editFormRules:{version:[{required:!0,message:this.$t("common.holderInput"),trigger:"blur"}],memo:[{required:!0,message:this.$t("common.holderInput"),trigger:"blur"}],feature:[{required:!0,message:this.$t("common.holderSelect"),trigger:"change"}]},editForm:{version:"",memo:"",feature:""}}},computed:{features:function(){return[{key:"basic",label:this.$t("cloud.basic")},{key:"advanced",label:this.$t("cloud.advanced")},{key:"customized",label:this.$t("cloud.customized")}]}},mounted:function(){this.updateImages()},methods:{updateImages:function(e){var t=this;void 0===e&&(e=1),this.listLoading=!0,a.a.getAllImages(e,this.pageSize).then(function(e){t.images=e.data.result,t.total=e.data.total,t.pageSize=e.data.pageSize,t.listLoading=!1}).catch(function(e){t.listLoading=!1})},featureFormatter:function(e,t){return"basic"==e.feature?this.$t("cloud.basic"):"advanced"==e.feature?this.$t("cloud.advanced"):"customized"==e.feature?this.$t("cloud.customized"):void 0},handleCurrentChange:function(e){this.updateImages(e)},getTag:function(e){return"basic"==e?"success":"advanced"==e?"warning":"customized"==e?"danger":""},closeDlg:function(){this.editFormVisible=!1,this.editForm.version="",this.editForm.feature="",this.editForm.memo=""},handleAdd:function(){this.editFormVisible=!0,this.editForm.version="",this.editForm.feature="",this.editForm.memo=""},handleDelete:function(e,t){var o=this;this.$confirm(this.$t("common.toCancel"),this.$t("common.tip"),{type:"warning"}).then(function(){o.onDelete(e,t)}).catch(function(){})},onDelete:function(e,t){var o=this;this.listLoading=!0,a.a.deleteImage(this.images[e].id).then(function(e){o.updateImages(),o.$message.success(o.$t("common.tipSuccess"))}).catch(function(e){o.listLoading=!1})},handleUpload:function(e,t){this.$router.push({path:"/updateImage",query:{id:this.images[e].id}})},editSubmit:function(e){var t=this,o=this.editForm;t.$refs[e].validate(function(e){e&&(t.editLoading=!0,a.a.createImage(o.version,o.memo,o.feature).then(function(e){t.editLoading=!1,t.editFormVisible=!1,t.updateImages(),t.$message.success(t.$t("common.tipSuccess"))}).catch(function(e){t.editLoading=!1,t.editFormVisible=!1}))})}}},r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"tips"},[o("p",[e._v(e._s(e.$t("route.cloudImages")))])]),e._v(" "),o("el-button",{staticClass:"addparam",attrs:{type:"success"},on:{click:function(t){e.handleAdd()}}},[e._v(e._s(e.$t("cloud.btnAddNew")))]),e._v(" "),e.editFormVisible?o("el-dialog",{attrs:{title:e.$t("cloud.btnAddNew"),visible:e.editFormVisible,"close-on-click-modal":!1,"before-close":e.closeDlg}},[o("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[o("el-form-item",{attrs:{label:e.$t("cloud.version"),prop:"version"}},[o("el-input",{attrs:{placeholder:e.$t("common.holderInput")},model:{value:e.editForm.version,callback:function(t){e.$set(e.editForm,"version",t)},expression:"editForm.version"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("cloud.memo"),prop:"memo"}},[o("el-input",{attrs:{placeholder:e.$t("common.holderInput")},model:{value:e.editForm.memo,callback:function(t){e.$set(e.editForm,"memo",t)},expression:"editForm.memo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("cloud.feature"),prop:"feature"}},[o("el-select",{staticClass:"handle-select",attrs:{clearable:"",placeholder:e.$t("common.holderSelect")},model:{value:e.editForm.feature,callback:function(t){e.$set(e.editForm,"feature",t)},expression:"editForm.feature"}},[e._l(e.features,function(e){return[o("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})]})],2)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.closeDlg}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),o("el-button",{attrs:{type:"danger",loading:e.editLoading},on:{click:function(t){e.editSubmit("editForm")}}},[e._v(e._s(e.$t("common.commit")))])],1)],1):e._e(),e._v(" "),e.total>0?o("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.images,border:"",strip:"",size:"mini"}},[o("el-table-column",{attrs:{type:"index",width:"40"}}),e._v(" "),o("el-table-column",{attrs:{prop:"version",label:e.$t("cloud.version"),width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"feature",label:e.$t("cloud.feature"),formatter:e.featureFormatter,width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",{attrs:{type:e.getTag(t.row.feature)}},[e._v(e._s(e.featureFormatter({feature:t.row.feature})))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"memo",label:e.$t("cloud.memo")}}),e._v(" "),o("el-table-column",{attrs:{prop:"firmware_updated",label:e.$t("common.modified"),width:"150"}}),e._v(" "),o("el-table-column",{attrs:{label:e.$t("common.operation"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button-group",[o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){e.handleUpload(t.$index,t.row)}}},[e._v(e._s(e.$t("cloud.upload")))]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,t.row)}}},[e._v(e._s(e.$t("common.delete")))])],1)]}}])})],1)],1)},l=[],s={render:r,staticRenderFns:l},d=s,c=o("VU/8"),u=i,m=c(n,d,!1,u,"data-v-1b0a8b96",null);t.default=m.exports},oSN0:function(e,t,o){var i=o("D9Hh");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o("rjj0")("1691efe8",i,!0,{})}});