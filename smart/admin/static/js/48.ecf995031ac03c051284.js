webpackJsonp([48],{"4AeC":function(t,a,e){a=t.exports=e("FZ+f")(!1),a.push([t.i,"\n.tips[data-v-2ce576bf] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.handle-box[data-v-2ce576bf]{\r\n    margin-bottom: 20px;\n}\n.handle-select[data-v-2ce576bf]{\r\n    width: 250px;\n}\n.echarts-line[data-v-2ce576bf] {\r\n    margin-top: 2rem;\r\n    width: 100%;\r\n    height: 400px;\n}\n.box-card[data-v-2ce576bf] {\r\n    width: 80%;\r\n    text-align: center;\n}\n.count[data-v-2ce576bf] {\r\n    font-size: 36px;\r\n    color: #d9534f;\n}\r\n",""])},e33I:function(t,a,e){var n=e("4AeC");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("558d30ac",n,!0,{})},oM6G:function(t,a,e){"use strict";function n(t){e("e33I")}Object.defineProperty(a,"__esModule",{value:!0});var s=e("nv77"),i=e("xV2B"),c=e("UgCr"),l=e("XhSL"),r=(e("4UDB"),e("80cc"),e("Oq2I"),e("miEh"),{components:{IEcharts:l.a},data:function(){var t=function(t){return t.max+10};return{listLoading:!1,tenants:[],tenantId:"all",cntTotal:"",cntToday:"",cnt7Day:"",cnt30Day:"",daterange:[],products:[],prodId:"all",line:{title:{text:this.$t("statistics.trend"),left:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:[]},yAxis:{type:"value",max:t},series:[{type:"line",smooth:!0,name:this.$t("route.activated"),data:[]}]}}},mounted:function(){var t=this,a=new Date,e=new Date;e.setTime(e.getTime()-2592e6),this.daterange=[e,a],this.products=[],c.a.getAllProducts().then(function(a){t.products=a.data.result,t.products.unshift({id:"all"})}).catch(function(t){}),s.a.getAllTenants().then(function(a){t.tenants=a.data.result,t.tenants.unshift({id:"all"})}).catch(function(t){})},methods:{getProductLabel:function(t){return"all"==t.id?this.$t("statistics.allProducts"):t.model+"("+t.species+")"},getTenantLabel:function(t){return"all"==t.id?this.$t("statistics.allTenants"):t.company},handleChange:function(t){},handleSearch:function(){var t=this,a=this,e=this.daterange[0],n=this.daterange[1],s=new Date,c=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),l=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),r={category:"activated",starttime:c,endtime:l};for("all"!=this.tenantId&&(r.tenantId=this.tenantId),"all"!=this.prodId&&(r.productId=this.prodId),this.line.xAxis.data=[],s.setTime(e.getTime());n.getTime()>=s;){var o=s.getFullYear(),d=s.getMonth()+1,u=s.getDate();this.line.xAxis.data.push(o+"-"+(d<10?"0"+d:d)+"-"+(u<10?"0"+u:u)),s.setDate(s.getDate()+1)}this.cntToday="",this.cntTotal="",this.cnt7Day="",this.cnt30Day="",this.listLoading=!0,this.line.series[0].data=[],i.a.getDeviceStatistics(r).then(function(e){a.$message.success(a.$t("common.tipSuccess")),t.cntToday=e.data.today,t.cntTotal=e.data.total,t.cnt7Day=e.data.last7,t.cnt30Day=e.data.last30;var n=e.data.result,s=[];t.line.series[0].data=[],t.line.xAxis.data.forEach(function(t){var a=0;n.forEach(function(e){e.date==t&&(a=e.count)}),s.push({value:a,name:t})}),t.line.series[0].data=s,t.listLoading=!1}).catch(function(a){t.listLoading=!1})}},watch:{tenantId:function(t,a){var e=this;this.products=[],this.prodId="all",c.a.getAllProducts("all"==t?"":t).then(function(t){e.products=t.data.result,e.products.unshift({id:"all"})}).catch(function(t){})}}}),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"tips"},[e("p",[t._v(t._s(t.$t("route.activated")))])]),t._v(" "),e("div",{staticClass:"handle-box"},[e("el-select",{staticClass:"handle-select",model:{value:t.tenantId,callback:function(a){t.tenantId=a},expression:"tenantId"}},[t._l(t.tenants,function(a){return[e("el-option",{key:a.id,attrs:{label:t.getTenantLabel(a),value:a.id}})]})],2),t._v(" "),e("el-select",{staticClass:"handle-select",model:{value:t.prodId,callback:function(a){t.prodId=a},expression:"prodId"}},[t._l(t.products,function(a){return[e("el-option",{key:a.id,attrs:{label:t.getProductLabel(a),value:a.id}})]})],2),t._v(" "),e("el-date-picker",{staticClass:"handle-daterange",attrs:{type:"daterange","range-separator":t.$t("statistics.to"),"start-placeholder":t.$t("statistics.starttime"),"end-placeholder":t.$t("statistics.endtime")},on:{change:t.handleChange},model:{value:t.daterange,callback:function(a){t.daterange=a},expression:"daterange"}}),t._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:t.listLoading},on:{click:t.handleSearch}},[t._v(t._s(t.$t("common.search")))])],1),t._v(" "),e("div",{staticClass:"tips"},[e("p",[t._v(t._s(t.$t("statistics.tipActivated")))])]),t._v(" "),e("el-card",{staticClass:"box-card tips",attrs:{shadow:"always"}},[e("el-row",{attrs:{gutter:24}},[e("el-col",{attrs:{span:6}},[t._v(t._s(t.$t("statistics.cntTotal")))]),t._v(" "),e("el-col",{attrs:{span:6}},[t._v(t._s(t.$t("statistics.cntToday")))]),t._v(" "),e("el-col",{attrs:{span:6}},[t._v(t._s(t.$t("statistics.cnt7Day")))]),t._v(" "),e("el-col",{attrs:{span:6}},[t._v(t._s(t.$t("statistics.cnt30Day")))])],1),t._v(" "),e("el-row",{staticClass:"count",attrs:{gutter:24}},[e("el-col",{attrs:{span:6}},[t._v(t._s(t.cntTotal))]),t._v(" "),e("el-col",{attrs:{span:6}},[t._v(t._s(t.cntToday))]),t._v(" "),e("el-col",{attrs:{span:6}},[t._v(t._s(t.cnt7Day))]),t._v(" "),e("el-col",{attrs:{span:6}},[t._v(t._s(t.cnt30Day))])],1)],1),t._v(" "),e("div",{staticClass:"echarts-line"},[e("IEcharts",{attrs:{option:t.line}})],1)],1)},d=[],u={render:o,staticRenderFns:d},h=u,p=e("VU/8"),v=n,g=p(r,h,!1,v,"data-v-2ce576bf",null);a.default=g.exports}});