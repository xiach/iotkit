webpackJsonp([16],{"89xJ":function(t,e,i){var o=i("uM8Q");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("3825000d",o,!0,{})},uM8Q:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"\n.tips[data-v-cf1e7020] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.handle-box[data-v-cf1e7020]{\r\n    margin-bottom: 20px;\n}\n.handle-select[data-v-cf1e7020]{\r\n    width: 120px;\n}\n.handle-input[data-v-cf1e7020]{\r\n    width: 300px;\r\n    display: inline-block;\n}\r\n",""])},w805:function(t,e,i){"use strict";function o(t){i("89xJ")}Object.defineProperty(e,"__esModule",{value:!0});var a=i("UgCr"),s={data:function(){return{listLoading:!0,total:0,pageSize:20,is_search:!1,products:[],select_cate:"",select_word:"",productId:null,is_hack:!1,oldStatus:"",editFormVisible:!1,editLoading:!1,editFormRules:{memo:[{required:!0,message:this.$t("common.holderInput"),trigger:"blur"}],result:[{required:!0,message:this.$t("common.holderSelect"),trigger:"change"}]},editForm:{result:"",memo:""}}},computed:{results:function(){return this.is_hack?[{key:"new",label:this.$t("product.new")},{key:"auditing",label:this.$t("product.auditing")},{key:"rejected",label:this.$t("product.rejected")},{key:"registered",label:this.$t("product.registered")},{key:"releasing",label:this.$t("product.releasing")},{key:"failure",label:this.$t("product.failure")},{key:"released",label:this.$t("product.released")}]:[{key:"approved",label:this.$t("contract.approved")},{key:"rejected",label:this.$t("contract.rejected")}]}},mounted:function(){this.updateProducts()},methods:{statusFormatter:function(t,e){return"new"==t.status?this.$t("product.new"):"auditing"==t.status?this.$t("product.auditing"):"rejected"==t.status?this.$t("product.rejected"):"registered"==t.status?this.$t("product.registered"):"releasing"==t.status?this.$t("product.releasing"):"failure"==t.status?this.$t("product.failure"):"released"==t.status?this.$t("product.released"):void 0},tipLockOrUnlock:function(t){return t.is_active?this.$t("common.lock"):this.$t("common.unlock")},getTag:function(t){return"released"==t?"success":"releasing"==t||"auditing"==t?"warning":"rejected"==t||"failure"==t?"danger":""},updateProducts:function(t){var e=this;void 0===t&&(t=1);var i=null;this.listLoading=!0,this.products=[],i=this.is_search&&this.select_cate&&this.select_word?a.a.searchProducts(this.select_cate,this.select_word,t,this.pageSize):a.a.getAllProducts("",t,this.pageSize),i.then(function(t){e.products=t.data.result,e.total=t.data.total,e.pageSize=t.data.pageSize,e.listLoading=!1}).catch(function(t){e.listLoading=!1,e.total=0})},activeFormatter:function(t,e){return t.is_active?this.$t("common.no"):this.$t("common.yes")},handleCurrentChange:function(t){this.updateProducts(t)},handleSearch:function(){this.is_search=!0,this.updateProducts()},handleView:function(t,e){this.$router.push({path:"/tenantProductDetail",query:{id:this.products[t].id}})},handleSign:function(t,e){this.productId=this.products[t].id,this.oldStatus=this.products[t].status,this.is_hack=!1,this.editForm.result="",this.editForm.memo="",this.editFormVisible=!0},editSubmit:function(t){var e=this,i=this,o=this.editForm;i.$refs[t].validate(function(t){if(t){var s=o.result;e.is_hack||(s="approved"==o.result?"auditing"==e.oldStatus?"registered":"released":"auditing"==e.oldStatus?"rejected":"failure"),i.editLoading=!0,a.a.auditProduct(e.productId,s,e.memo).then(function(t){i.editLoading=!1,i.editFormVisible=!1,i.updateProducts(),e.$message.success(e.$t("common.tipSuccess"))}).catch(function(t){i.editLoading=!1,i.editFormVisible=!1})}})},closeDlg:function(){this.editFormVisible=!1},handleHack:function(t,e){var i=this;this.$confirm(this.$t("common.hackTip"),this.$t("common.tip"),{type:"warning"}).then(function(){i.onHack(t,e)}).catch(function(){})},onHack:function(t,e){this.is_hack=!0,this.productId=this.products[t].id,this.editForm.result="",this.editForm.memo="",this.editFormVisible=!0}},watch:{select_cate:function(t,e){this.select_word=""}}},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"tips"},[i("p",[t._v(t._s(t.$t("route.tenantProduct")))])]),t._v(" "),i("div",{staticClass:"handle-box"},[i("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"请选择"},model:{value:t.select_cate,callback:function(e){t.select_cate=e},expression:"select_cate"}},[i("el-option",{key:"1",attrs:{label:t.$t("product.promodel"),value:"model"}}),t._v(" "),i("el-option",{key:"2",attrs:{label:t.$t("contract.company"),value:"tenant"}}),t._v(" "),i("el-option",{key:"3",attrs:{label:t.$t("product.protype"),value:"species"}})],1),t._v(" "),i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}}),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("搜索")])],1),t._v(" "),t.total>0?i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.handleCurrentChange}}):t._e(),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.products,border:"",strip:"",size:"mini"}},[i("el-table-column",{attrs:{type:"index",width:"40"}}),t._v(" "),i("el-table-column",{attrs:{prop:"model",label:t.$t("product.promodel"),width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"species",label:t.$t("product.protype"),width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"tenant",label:t.$t("contract.company"),width:"230"}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:t.$t("common.status"),formatter:t.statusFormatter},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t.getTag(e.row.status)}},[t._v(t._s(t.statusFormatter({status:e.row.status})))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"updated",label:t.$t("common.modified"),width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"memo",label:t.$t("contract.memo")}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("common.operation"),width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button-group",[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){t.handleView(e.$index,e.row)}}},[t._v(t._s(t.$t("contract.view")))]),t._v(" "),"auditing"==e.row.status||"releasing"==e.row.status?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.handleSign(e.$index,e.row)}}},[t._v(t._s(t.$t("tenant.auditing")))]):t._e(),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.handleHack(e.$index,e.row)}}},[t._v(t._s(t.$t("common.hack")))])],1)]}}])})],1),t._v(" "),t.editFormVisible?i("el-dialog",{attrs:{title:t.$t("tenant.auditing"),visible:t.editFormVisible,"close-on-click-modal":!1,"before-close":t.closeDlg}},[i("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px",rules:t.editFormRules}},[i("el-form-item",{attrs:{label:t.$t("tenant.result"),prop:"result"}},[i("el-select",{staticClass:"handle-select",attrs:{placeholder:t.$t("common.holderSelect")},model:{value:t.editForm.result,callback:function(e){t.$set(t.editForm,"result",e)},expression:"editForm.result"}},[t._l(t.results,function(t){return[i("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})]})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("tenant.memo"),prop:"memo"}},[i("el-input",{model:{value:t.editForm.memo,callback:function(e){t.$set(t.editForm,"memo",e)},expression:"editForm.memo"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.closeDlg}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"danger",loading:t.editLoading},on:{click:function(e){t.editSubmit("editForm")}}},[t._v(t._s(t.$t("common.commit")))])],1)],1):t._e()],1)},l=[],n={render:r,staticRenderFns:l},c=n,d=i("VU/8"),u=o,m=d(s,c,!1,u,"data-v-cf1e7020",null);e.default=m.exports}});