webpackJsonp([51],{Ujbf:function(t,e,r){e=t.exports=r("FZ+f")(!1),e.push([t.i,"\n.tips[data-v-2915c412] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.steps[data-v-2915c412] {\r\n    width: 80%;\r\n    margin-left: 10%;\n}\n.editForm[data-v-2915c412] {\n}\n.btn-commit[data-v-2915c412] {\r\n    text-align: center;\n}\n.handle-select[data-v-2915c412] {\r\n    width: 100%;\n}\r\n",""])},VZM4:function(t,e,r){"use strict";function a(t){r("nG98")}Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{active:0,loading:!1,editFormRules:{name:[{required:!0,message:this.$t("contract.nameHolder"),trigger:"blur"}],email:[{required:!0,message:this.$t("contract.emailHolder"),trigger:"blur"}],phone:[{required:!0,message:this.$t("contract.phoneHolder"),trigger:"blur"}],mode:[{required:!0,message:this.$t("contract.modeHolder"),trigger:"change"}],type:[{required:!0,message:this.$t("contract.typeHolder"),trigger:"change"}],brief:[{required:!0,message:this.$t("contract.briefHolder"),trigger:"blur"}]},editForm:{tenant:this.$store.getters.tenant,site:"",mode:"",name:"",email:"",phone:"",type:"",brief:""}}},mounted:function(){0==this.$store.getters.agreements.length&&this.$store.dispatch("GetAgreements")},computed:{steps:function(){var t=[];return t.push(this.$t("contract.apply")),t.push(this.$t("contract.ongoing")),t.push(this.$t("contract.auditing")),t.push(this.$t("contract.approved")),t},options:function(){var t=[];return t.push({key:"Large",label:this.$t("contract.Large")}),t.push({key:"Small",label:this.$t("contract.Small")}),t.push({key:"Decoration",label:this.$t("contract.Decoration")}),t.push({key:"Entertainment",label:this.$t("contract.Entertainment")}),t.push({key:"Wearable",label:this.$t("contract.Wearable")}),t.push({key:"Healthy",label:this.$t("contract.Healthy")}),t.push({key:"Network",label:this.$t("contract.Network")}),t.push({key:"Others",label:this.$t("contract.Others")}),t},modes:function(){var t=[];return this.$store.getters.agreements.forEach(function(e){t.push({key:e.id,label:e.name})}),t}},methods:{submitForm:function(t){var e=this,r=this;r.$refs[t].validate(function(t){if(!t)return!1;r.applyContract(e.editForm.mode,e.editForm.name,e.editForm.phone,e.editForm.email,e.editForm.type,e.editForm.brief)})},applyContract:function(t,e,r,a,o,n){var i=this,l=this;this.loading=!0,this.$store.dispatch("applyContract",{agreementId:t,contact:e,phone:r,email:a,category:o,brief:n}).then(function(e){i.loading=!1,l.$router.replace({path:"/contractSign",query:{id:e.data.id,agreementId:t}})}).catch(function(t){i.loading=!1})}}},n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"tips"},[r("p",[t._v(t._s(t.$t("contract.progress")))])]),t._v(" "),r("div",{staticClass:"steps"},[r("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[t._l(t.steps,function(t){return[r("el-step",{attrs:{title:t}})]})],2)],1),t._v(" "),r("div",{staticClass:"tips"},[r("p",[t._v(t._s(t.$t("contract.commit")))])]),t._v(" "),r("div",{staticClass:"editForm"},[r("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"200px",rules:t.editFormRules}},[r("el-form-item",{attrs:{label:t.$t("contract.company"),prop:"tenant"}},[r("el-input",{attrs:{readonly:""},model:{value:t.editForm.tenant,callback:function(e){t.$set(t.editForm,"tenant",e)},expression:"editForm.tenant"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("contract.mode"),prop:"mode"}},[r("el-select",{staticClass:"handle-select",attrs:{clearable:"",placeholder:t.$t("contract.modeHolder")},model:{value:t.editForm.mode,callback:function(e){t.$set(t.editForm,"mode",e)},expression:"editForm.mode"}},[t._l(t.modes,function(t){return[r("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})]})],2)],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("contract.type"),prop:"type"}},[r("el-select",{staticClass:"handle-select",attrs:{clearable:"",placeholder:t.$t("contract.typeHolder")},model:{value:t.editForm.type,callback:function(e){t.$set(t.editForm,"type",e)},expression:"editForm.type"}},[t._l(t.options,function(t){return[r("el-option",{key:t.key,attrs:{label:t.label,value:t.key}})]})],2)],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("contract.brief"),prop:"brief"}},[r("el-input",{attrs:{placeholder:t.$t("contract.briefHolder")},model:{value:t.editForm.brief,callback:function(e){t.$set(t.editForm,"brief",e)},expression:"editForm.brief"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("contract.site"),prop:"site"}},[r("el-input",{model:{value:t.editForm.site,callback:function(e){t.$set(t.editForm,"site",e)},expression:"editForm.site"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("contract.name"),prop:"name"}},[r("el-input",{attrs:{placeholder:t.$t("contract.nameHolder")},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("contract.phone"),prop:"phone"}},[r("el-input",{attrs:{placeholder:t.$t("contract.phoneHolder")},model:{value:t.editForm.phone,callback:function(e){t.$set(t.editForm,"phone",e)},expression:"editForm.phone"}})],1),t._v(" "),r("el-form-item",{attrs:{label:t.$t("contract.email"),prop:"email"}},[r("el-input",{attrs:{placeholder:t.$t("contract.emailHolder")},model:{value:t.editForm.email,callback:function(e){t.$set(t.editForm,"email",e)},expression:"editForm.email"}})],1),t._v(" "),r("div",{staticClass:"btn-commit"},[r("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.submitForm("editForm")}}},[t._v(t._s(t.$t("contract.commit")))])],1)],1)],1)])},i=[],l={render:n,staticRenderFns:i},s=l,c=r("VU/8"),m=a,d=c(o,s,!1,m,"data-v-2915c412",null);e.default=d.exports},nG98:function(t,e,r){var a=r("Ujbf");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);r("rjj0")("3e5b77de",a,!0,{})}});