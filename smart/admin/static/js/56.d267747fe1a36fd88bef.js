webpackJsonp([56],{dibd:function(t,n,r){n=t.exports=r("FZ+f")(!1),n.push([t.i,"\n.tips[data-v-1d076935] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.upload-demo[data-v-1d076935] {\r\n    width: 40%;\r\n    height: 10%;\n}\n.upload-btn[data-v-1d076935] {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\n}\n.btn-commit[data-v-1d076935] {\r\n    text-align: center;\n}\r\n",""])},f4cn:function(t,n,r){var i=r("dibd");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);r("rjj0")("7673443a",i,!0,{})},gdWd:function(t,n,r){"use strict";function i(t){r("f4cn")}Object.defineProperty(n,"__esModule",{value:!0});var o=r("mvHQ"),e=r.n(o),a=r("VHwi"),s=r("TIfe"),c={data:function(){return{isError:!1,url:null}},computed:{action:function(){return location.origin+"/api/account/application/"+this.$route.query.id+"/h5/"},headers:function(){return{Authorization:s.a.getToken()}}},mounted:function(){var t=this;a.a.getApplication(this.$route.query.id).then(function(n){n.data.h5.length>0&&(t.url=n.data.h5)}).catch(function(t){})},methods:{submitUpload:function(t){this.$refs[t].submit()},beforeUpload:function(t){if(this.isError)return this.isError=!1,this.$message.error(this.$t("common.fileTypeErr")),!1},onChange:function(t,n){var r=this;this.isError=!1,n.forEach(function(t){var n=t.name.lastIndexOf(".");if(n>0){var i=t.name.substr(n+1);("zip"==i||"ZIP"==i)&&t.size<1048576&&t.size>0?r.isError=!1:r.isError=!0}else r.isError=!0}),this.isError&&this.$message.error(this.$t("common.fileTypeErr")),console.log("onChange",e()(t))},onSuccess:function(t,n,r){this.$message.success(this.$t("common.tipSuccess"))},onError:function(t,n,r){this.$message.error(this.$t("common.tipFailed"))},onBack:function(){this.$router.back(-1)}}},l=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",[r("div",{staticClass:"tips"},[r("p",[t._v(t._s(t.$t("application.appH5")))])]),t._v(" "),r("el-upload",{ref:"h5",staticClass:"upload-demo",attrs:{drag:"",action:t.action,"auto-upload":!1,"on-change":t.onChange,name:"h5",multiple:!1,limit:1,"before-upload":t.beforeUpload,headers:t.headers,"on-success":t.onSuccess,"on-error":t.onError}},[r("i",{staticClass:"el-icon-upload"}),t._v(" "),r("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),r("em",[t._v("点击上传")])]),t._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("仅支持.zip文件格式，根目录包括index.html，且文件大小不超过1MB")])]),t._v(" "),r("el-button",{staticClass:"upload-btn",attrs:{size:"small",type:"danger"},on:{click:function(n){t.submitUpload("h5")}}},[t._v("上传到服务器")]),t._v(" "),null!=t.url?r("div",[t._v("\r\n        如有需要，请"),r("a",{attrs:{href:t.url}},[t._v(" 点此下载")]),t._v("最新H5控制界面!\r\n    ")]):t._e(),t._v(" "),r("div",{staticClass:"btn-commit"},[r("el-button",{attrs:{type:"primary"},on:{click:t.onBack}},[t._v(t._s(t.$t("common.back")))])],1)],1)},u=[],d={render:l,staticRenderFns:u},p=d,m=r("VU/8"),h=i,f=m(c,p,!1,h,"data-v-1d076935",null);n.default=f.exports}});