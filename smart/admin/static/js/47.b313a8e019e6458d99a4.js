webpackJsonp([47],{"4KzB":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.tips[data-v-317ade2e] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.handle-box[data-v-317ade2e]{\r\n    margin-bottom: 20px;\n}\n.handle-select[data-v-317ade2e]{\r\n    width: 250px;\n}\n.echarts-pie[data-v-317ade2e] {\r\n    width: 400px;\r\n    height: 300px;\r\n    margin-bottom: 100px;\n}\n.echarts-map[data-v-317ade2e] {\r\n    width: 700px;\r\n    height: 600px;\r\n    margin-bottom: 100px;\n}\n.box-card[data-v-317ade2e] {\r\n    width: 50%;\r\n    text-align: center;\n}\n.count[data-v-317ade2e] {\r\n    font-size: 36px;\r\n    color: #d9534f;\n}\r\n",""])},EK8T:function(t,e,a){"use strict";function i(t){a("uevA")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("xV2B"),n=a("UgCr"),r=a("XhSL"),c=(a("Vb+l"),a("nUSl"),a("Bhwq"),a("80cc"),a("Oq2I"),a("miEh"),{components:{IEcharts:r.a},data:function(){var t=function(t,e,a){return isNaN(t.value)?"":t.name+": "+t.value};return{listLoading:!1,cntDev:"",cntPro:"",cntCity:"",total:0,pageSize:20,products:[],prodId:"all",provinces:[],cities:[],pie:{title:{text:this.$t("statistics.tipProvince"),left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c} <br/>总占比: {d}%"},series:[{type:"pie",radius:["30%","70%"],center:["50%","50%"],data:[]}]},map:{title:{text:this.$t("statistics.tipGis"),left:"center"},tooltip:{trigger:"item",formatter:t},visualMap:{min:0,max:2500,left:"left",top:"bottom",text:["高","低"],calculable:!0},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},series:[{type:"map",mapType:"china",roam:!1,data:[]}]}}},mounted:function(){var t=this;this.products=[],n.a.getAllProducts().then(function(e){t.products=e.data.result,t.products.unshift({id:"all"})}).catch(function(t){})},methods:{getProductLabel:function(t){return"all"==t.id?this.$t("statistics.allProducts"):t.model+"("+t.species+")"},handleCurrentChange:function(t){},handleSearch:function(){var t=this,e=this,a=null;a="all"==this.prodId?{category:"gis",species:"province",limit:"10"}:{category:"gis",species:"province",productId:this.prodId,limit:"50"},this.listLoading=!0,this.provinces=[],this.cities=[],this.cntDev="",this.cntPro="",this.cntCity="",this.total=0,this.pie.series[0].data=[],this.map.series[0].data=[],s.a.getDeviceStatistics(a).then(function(i){e.$message.success(e.$t("common.tipSuccess")),t.provinces=i.data.result,t.cntDev=i.data.count,t.cntPro=i.data.province;var n=[];t.pie.series[0].data=[],t.provinces.forEach(function(t){n.push({value:t.count,name:t.province})}),n.length>10?t.pie.series[0].data=n.slice(0,10):t.pie.series[0].data=n,n.length>0&&(t.map.visualMap.max=t.provinces[0].count),n=[],t.map.series[0].data=[],t.provinces.forEach(function(t){n.push({value:t.count,name:t.province})}),n.length>50?t.map.series[0].data=n.slice(0,50):t.map.series[0].data=n,a.species="city",s.a.getDeviceStatistics(a).then(function(e){t.cities=e.data.result,t.cntCity=e.data.city,t.total=t.cities.length,t.listLoading=!1}).catch(function(e){t.listLoading=!1})}).catch(function(e){t.listLoading=!1})}}}),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tips"},[a("p",[t._v(t._s(t.$t("route.gisinfo")))])]),t._v(" "),a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select",model:{value:t.prodId,callback:function(e){t.prodId=e},expression:"prodId"}},[t._l(t.products,function(e){return[a("el-option",{key:e.id,attrs:{label:t.getProductLabel(e),value:e.id}})]})],2),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:t.listLoading},on:{click:t.handleSearch}},[t._v(t._s(t.$t("common.search")))])],1),t._v(" "),a("h5",{staticStyle:{color:"#797979"}},[t._v("从2016-10-01开始，根据已配网且上报数据的设备分析其地理分布，数据仅供参考。")]),t._v(" "),a("div",{staticClass:"tips"},[a("p",[t._v(t._s(t.$t("statistics.tipCount")))])]),t._v(" "),a("el-card",{staticClass:"box-card tips",attrs:{shadow:"always"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[t._v(t._s(t.$t("statistics.count")))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v(t._s(t.$t("statistics.province")))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v(t._s(t.$t("statistics.city")))])],1),t._v(" "),a("el-row",{staticClass:"count",attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[t._v(t._s(t.cntDev))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v(t._s(t.cntPro))]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v(t._s(t.cntCity))])],1)],1),t._v(" "),t.provinces.length>0?a("div",{staticClass:"echarts-pie"},[a("IEcharts",{attrs:{option:t.pie}})],1):t._e(),t._v(" "),t.provinces.length>0?a("div",{staticClass:"echarts-map"},[a("IEcharts",{attrs:{option:t.map}})],1):t._e(),t._v(" "),a("div",{staticClass:"tips"},[a("p",[t._v(t._s(t.$t("statistics.tipCity")))])]),t._v(" "),t.total>0?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.handleCurrentChange}}):t._e(),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.cities,border:"",strip:""}},[a("el-table-column",{attrs:{type:"index",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{prop:"province",label:t.$t("statistics.province")}}),t._v(" "),a("el-table-column",{attrs:{prop:"city",label:t.$t("statistics.city")}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:t.$t("statistics.count")}})],1)],1)},l=[],p={render:o,staticRenderFns:l},d=p,v=a("VU/8"),u=i,h=v(c,d,!1,u,"data-v-317ade2e",null);e.default=h.exports},uevA:function(t,e,a){var i=a("4KzB");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("1f731683",i,!0,{})}});