webpackJsonp([24],{"MyJ+":function(t,n,r){var s=r("avnX");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);r("rjj0")("316a229e",s,!0,{})},Sh7C:function(t,n,r){"use strict";function s(t){r("MyJ+")}Object.defineProperty(n,"__esModule",{value:!0});var o=r("mvHQ"),e=r.n(o),i=r("VHwi"),a=r("TIfe"),c={data:function(){return{isError:!1,urlAPNs:null}},computed:{actionAPNs:function(){return location.origin+"/api/account/application/"+this.$route.query.id+"/apns/"},headers:function(){return{Authorization:a.a.getToken()}}},mounted:function(){var t=this;i.a.getApplication(this.$route.query.id).then(function(n){n.data.iosCert.length>0&&(t.urlAPNs=n.data.iosCert)}).catch(function(t){})},methods:{submitUpload:function(t){this.$refs[t].submit()},beforeUpload:function(t){if(this.isError)return this.isError=!1,this.$message.error(this.$t("common.fileTypeErr")),!1},onChangeAPNs:function(t,n){var r=this;this.isError=!1,n.forEach(function(t){var n=t.name.lastIndexOf(".");if(n>0){var s=t.name.substr(n+1);("pem"==s||"PEM"==s)&&t.size<4096&&t.size>0?r.isError=!1:r.isError=!0}else r.isError=!0}),this.isError&&this.$message.error(this.$t("common.fileTypeErr")),console.log("onChange",e()(t))},onSuccess:function(t,n,r){this.$message.success(this.$t("common.tipSuccess"))},onError:function(t,n,r){this.$message.error(this.$t("common.tipFailed"))},onBack:function(){this.$router.back(-1)}}},l=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",[r("div",{staticClass:"tips"},[r("p",[t._v(t._s(t.$t("application.tipAPNs")))])]),t._v(" "),r("el-upload",{ref:"apns",staticClass:"upload-demo",attrs:{drag:"",action:t.actionAPNs,"auto-upload":!1,"on-change":t.onChangeAPNs,name:"apns",multiple:!1,limit:1,"before-upload":t.beforeUpload,headers:t.headers,"on-success":t.onSuccess,"on-error":t.onError}},[r("i",{staticClass:"el-icon-upload"}),t._v(" "),r("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),r("em",[t._v("点击上传")])]),t._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("仅支持.pem文件格式，且文件大小不超过4KB")])]),t._v(" "),r("el-button",{staticClass:"upload-btn",attrs:{size:"small",type:"danger"},on:{click:function(n){t.submitUpload("apns")}}},[t._v("上传到服务器")]),t._v(" "),null!=t.urlAPNs?r("div",[t._v("\r\n        如有需要，请"),r("a",{attrs:{href:t.urlAPNs}},[t._v(" 点此下载")]),t._v("最新APNs证书!\r\n    ")]):t._e(),t._v(" "),r("div",{staticClass:"btn-commit"},[r("el-button",{attrs:{type:"primary"},on:{click:t.onBack}},[t._v(t._s(t.$t("common.back")))])],1)],1)},u=[],p={render:l,staticRenderFns:u},d=p,m=r("VU/8"),f=s,h=m(c,d,!1,f,"data-v-79f63295",null);n.default=h.exports},avnX:function(t,n,r){n=t.exports=r("FZ+f")(!1),n.push([t.i,"\n.tips[data-v-79f63295] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.upload-demo[data-v-79f63295] {\r\n    width: 40%;\r\n    height: 10%;\n}\n.upload-btn[data-v-79f63295] {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\n}\n.btn-commit[data-v-79f63295] {\r\n    text-align: center;\n}\r\n",""])}});