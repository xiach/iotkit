webpackJsonp([42],{M6S3:function(t,r,n){r=t.exports=n("FZ+f")(!1),r.push([t.i,"\n.tips[data-v-35364633] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.upload-demo[data-v-35364633] {\r\n    width: 40%;\r\n    height: 10%;\n}\n.upload-btn[data-v-35364633] {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\n}\n.btn-commit[data-v-35364633] {\r\n    text-align: center;\n}\r\n",""])},dyqG:function(t,r,n){"use strict";function e(t){n("kLhx")}Object.defineProperty(r,"__esModule",{value:!0});var i=n("mvHQ"),o=n.n(i),a=n("UOHp"),s=n("TIfe"),c={data:function(){return{isError:!1,url:null}},computed:{action:function(){return location.origin+"/api/cloud/image/"+this.$route.query.id+"/"},headers:function(){return{Authorization:s.a.getToken()}}},mounted:function(){var t=this;a.a.getImage(this.$route.query.id).then(function(r){r.data.firmware.length>0&&(t.url=r.data.firmware)}).catch(function(t){})},methods:{submitUpload:function(t){this.$refs[t].submit()},beforeUpload:function(t){if(this.isError)return this.isError=!1,this.$message.error(this.$t("common.fileTypeErr")),!1},onChange:function(t,r){var n=this;this.isError=!1,r.forEach(function(t){var r=t.name.lastIndexOf(".");if(r>0){var e=t.name.substr(r+1);("zip"==e||"ZIP"==e)&&t.size<33554432&&t.size>0?n.isError=!1:n.isError=!0}else n.isError=!0}),this.isError&&this.$message.error(this.$t("common.fileTypeErr")),console.log("onChange",o()(t))},onSuccess:function(t,r,n){this.$message.success(this.$t("common.tipSuccess"))},onError:function(t,r,n){this.$message.error(this.$t("common.tipFailed"))},onBack:function(){this.$router.back(-1)}}},l=function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("div",[n("div",{staticClass:"tips"},[n("p",[t._v(t._s(t.$t("application.appH5")))])]),t._v(" "),n("el-upload",{ref:"firmware",staticClass:"upload-demo",attrs:{drag:"",action:t.action,"auto-upload":!1,"on-change":t.onChange,name:"firmware",multiple:!1,limit:1,"before-upload":t.beforeUpload,headers:t.headers,"on-success":t.onSuccess,"on-error":t.onError}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])]),t._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("仅支持.zip文件格式，且文件大小不超过32MB")])]),t._v(" "),n("el-button",{staticClass:"upload-btn",attrs:{size:"small",type:"danger"},on:{click:function(r){t.submitUpload("firmware")}}},[t._v("上传到服务器")]),t._v(" "),null!=t.url?n("div",[t._v("\r\n        如有需要，请"),n("a",{attrs:{href:t.url}},[t._v(" 点此下载")]),t._v("最新镜像!\r\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"btn-commit"},[n("el-button",{attrs:{type:"primary"},on:{click:t.onBack}},[t._v(t._s(t.$t("common.back")))])],1)],1)},u=[],d={render:l,staticRenderFns:u},m=d,p=n("VU/8"),f=e,h=p(c,m,!1,f,"data-v-35364633",null);r.default=h.exports},kLhx:function(t,r,n){var e=n("M6S3");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);n("rjj0")("2a6afedc",e,!0,{})}});