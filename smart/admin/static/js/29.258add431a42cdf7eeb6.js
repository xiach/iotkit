webpackJsonp([29],{"NvR+":function(t,n,e){"use strict";function r(t){e("UYWV")}Object.defineProperty(n,"__esModule",{value:!0});var i=e("mvHQ"),o=e.n(i),a=e("VHwi"),s=e("TIfe"),u={data:function(){return{isError:!1,url:null}},computed:{tips:function(){return"icon"==this.$route.query.type?"仅支持.png文件格式，且文件大小不超过64KB":"仅支持.png/.jpg文件格式，且文件大小不超过1MB"},title:function(){return"icon"==this.$route.query.type?this.$t("application.appIcon"):this.$t("application.appAdv")},name:function(){return this.$route.query.type},action:function(){return location.origin+"/api/account/application/"+this.$route.query.id+"/"+this.$route.query.type+"/"},headers:function(){return{Authorization:s.a.getToken()}}},mounted:function(){var t=this;a.a.getApplication(this.$route.query.id).then(function(n){"icon"==t.$route.query.type?n.data.icon.length>0&&(t.url=n.data.icon):"adv"==t.$route.query.type&&n.data.adv.length>0&&(t.url=n.data.adv)}).catch(function(t){})},methods:{submitUpload:function(t){this.$refs[t].submit()},beforeUpload:function(t){if(this.isError)return this.isError=!1,this.$message.error(this.$t("common.fileTypeErr")),!1},onChange:function(t,n){var e=this,r=this;this.isError=!1,n.forEach(function(t){var n=t.name.lastIndexOf(".");if(n>0){var i=t.name.substr(n+1);("png"==i||"PNG"==i||"jpg"==i||"JPG"==i)&&("icon"==e.$route.query.type&&t.size<65536||"adv"==e.$route.query.type&&t.size<1048576)&&t.size>0?r.isError=!1:r.isError=!0}else r.isError=!0}),this.isError&&this.$message.error(this.$t("common.fileTypeErr")),console.log("onChange",o()(t))},onSuccess:function(t,n,e){this.$message.success(this.$t("common.tipSuccess"))},onError:function(t,n,e){this.$message.error(this.$t("common.tipFailed"))},onBack:function(){this.$router.back(-1)}}},c=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"tips"},[e("p",[t._v(t._s(t.title))])]),t._v(" "),e("el-upload",{ref:"apns",staticClass:"upload-demo",attrs:{drag:"",action:t.action,"auto-upload":!1,"on-change":t.onChange,name:t.name,multiple:!1,limit:1,"before-upload":t.beforeUpload,headers:t.headers,"on-success":t.onSuccess,"on-error":t.onError}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.tips))])]),t._v(" "),e("el-button",{staticClass:"upload-btn",attrs:{size:"small",type:"danger"},on:{click:function(n){t.submitUpload("apns")}}},[t._v("上传到服务器")]),t._v(" "),null!=t.url?e("div",[t._v("\r\n        如有需要，请"),e("a",{attrs:{href:t.url}},[t._v(" 点此下载")]),t._v("最新图片!\r\n    ")]):t._e(),t._v(" "),e("div",{staticClass:"btn-commit"},[e("el-button",{attrs:{type:"primary"},on:{click:t.onBack}},[t._v(t._s(t.$t("common.back")))])],1)],1)},l=[],p={render:c,staticRenderFns:l},d=p,m=e("VU/8"),h=r,f=m(u,d,!1,h,"data-v-68715e68",null);n.default=f.exports},UYWV:function(t,n,e){var r=e("Ud4q");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("1a587688",r,!0,{})},Ud4q:function(t,n,e){n=t.exports=e("FZ+f")(!1),n.push([t.i,"\n.tips[data-v-68715e68] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.upload-demo[data-v-68715e68] {\r\n    width: 40%;\r\n    height: 10%;\n}\n.upload-btn[data-v-68715e68] {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\n}\n.btn-commit[data-v-68715e68] {\r\n    text-align: center;\n}\r\n",""])}});