webpackJsonp([57],{Jagy:function(t,e,a){var n=a("RnaZ");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("1f6b4ea8",n,!0,{})},RnaZ:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.tips[data-v-1c0a4f50] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.handle-box[data-v-1c0a4f50]{\r\n    margin-bottom: 20px;\n}\n.handle-select[data-v-1c0a4f50]{\r\n    width: 200px;\n}\n.handle-input[data-v-1c0a4f50]{\r\n    width: 300px;\r\n    display: inline-block;\n}\n.btn-commit[data-v-1c0a4f50] {\r\n    text-align: center;\n}\n.devTable[data-v-1c0a4f50] {\r\n    margin-top: 1rem;\n}\r\n",""])},po0f:function(t,e,a){"use strict";function n(t){a("Jagy")}Object.defineProperty(e,"__esModule",{value:!0});var c=a("UgCr"),i=a("xV2B"),l={data:function(){return{listLoading:!1,total:0,curPage:0,pageSize:10,select_cate:"",select_word:"",select_cate_2:"",products:[],devices:[]}},mounted:function(){var t=this;this.products=[],c.a.getAllProducts().then(function(e){t.products=e.data.result}).catch(function(t){})},methods:{tipLockOrUnlock:function(t){return t.is_active?this.$t("common.lock"):this.$t("common.unlock")},activeFormatter:function(t,e){return t.is_active?this.$t("common.no"):this.$t("common.yes")},getTag:function(t){return 1==t?"success":"danger"},updateDevices:function(t){var e=this;void 0===t&&(t=1);var a=null;this.listLoading=!0,this.devices=[],a=this.select_cate&&(this.select_word||this.select_cate_2)?i.a.queryDevice(this.select_cate,this.select_word||this.select_cate_2,t,this.pageSize):i.a.getAllDevice(t,this.pageSize),a.then(function(t){e.devices=t.data.result,e.total=t.data.total,e.pageSize=t.data.pageSize,e.listLoading=!1}).catch(function(t){e.total=0,e.listLoading=!1})},getProductLabel:function(t){return t.model+"("+t.species+")"},handleReset:function(){this.$refs.editForm.resetFields()},handleQuery:function(){this.updateDevices()},handleCurrentChange:function(t){this.curPage=t,this.updateDevices(t)},handleLock:function(t,e){var a=this,n=null;n=e.is_active?this.$t("common.toLock"):this.$t("common.toUnlock"),this.$confirm(n,this.$t("common.tip"),{type:"warning"}).then(function(){a.onLock(t,e)}).catch(function(){})},onLock:function(t,e){var a=this;this.listLoading=!0,i.a.lockDevice(this.devices[t].id,e.is_active?"yes":"no").then(function(t){a.$message.success(a.$t("common.tipSuccess")),a.updateDevices(a.curPage)}).catch(function(t){a.listLoading=!1})}},watch:{select_cate:function(t,e){this.select_word="",this.select_cate_2=""}}},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tips"},[a("p",[t._v(t._s(t.$t("route.deviceList")))])]),t._v(" "),a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{clearable:"",placeholder:"请选择"},model:{value:t.select_cate,callback:function(e){t.select_cate=e},expression:"select_cate"}},[a("el-option",{key:"4",attrs:{label:"MAC",value:"mac"}}),t._v(" "),a("el-option",{key:"1",attrs:{label:t.$t("product.promodel"),value:"model"}}),t._v(" "),a("el-option",{key:"3",attrs:{label:t.$t("device.username"),value:"username"}})],1),t._v(" "),"model"!=t.select_cate?a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}}):a("el-select",{staticClass:"handle-input mr10",attrs:{clearable:"",placeholder:"请选择"},model:{value:t.select_cate_2,callback:function(e){t.select_cate_2=e},expression:"select_cate_2"}},[t._l(t.products,function(e){return[a("el-option",{key:e.id,attrs:{label:t.getProductLabel(e),value:e.id}})]})],2),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.listLoading,icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("搜索")])],1),t._v(" "),t.total>0?a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.handleCurrentChange}}):t._e(),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"devTable",staticClass:"devTable",attrs:{data:t.devices,border:"",strip:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"UUID",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mac",label:"MAC"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created",label:t.$t("device.created")}}),t._v(" "),a("el-table-column",{attrs:{prop:"activated",label:t.$t("device.activated")}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_active",label:t.$t("application.is_active"),formatter:t.activeFormatter,width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.getTag(e.row.is_active)}},[t._v(t._s(t.activeFormatter({is_active:e.row.is_active})))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("contract.action")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleLock(e.$index,e.row)}}},[t._v(t._s(t.tipLockOrUnlock(e.row)))])],1)]}}])})],1)],1)},s=[],r={render:o,staticRenderFns:s},d=r,u=a("VU/8"),v=n,p=u(l,d,!1,v,"data-v-1c0a4f50",null);e.default=p.exports}});