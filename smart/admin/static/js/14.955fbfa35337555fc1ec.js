webpackJsonp([14],{"1V24":function(t,n,r){var o=r("zWsR");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("rjj0")("0628d800",o,!0,{})},"V+9O":function(t,n,r){"use strict";function o(t){r("1V24")}Object.defineProperty(n,"__esModule",{value:!0});var e=r("mvHQ"),i=r.n(e),s=r("UgCr"),a=r("TIfe"),c={data:function(){return{isError:!1,url:null}},computed:{action:function(){return location.origin+"/api/product/"+this.$route.query.id+"/icon/"},headers:function(){return{Authorization:a.a.getToken()}}},mounted:function(){var t=this;s.a.getProduct(this.$route.query.id).then(function(n){n.data.icon.length>0&&(t.url=n.data.icon)}).catch(function(t){})},methods:{submitUpload:function(){this.$refs.upload.submit()},beforeUpload:function(t){if(this.isError)return this.isError=!1,this.$message.error(this.$t("common.fileTypeErr")),!1},onChange:function(t,n){var r=this;this.isError=!1,n.forEach(function(t){var n=t.name.lastIndexOf(".");if(n>0){var o=t.name.substr(n+1);("png"==o||"PNG"==o)&&t.size<65536&&t.size>0?r.isError=!1:r.isError=!0}else r.isError=!0}),this.isError&&this.$message.error(this.$t("common.fileTypeErr")),console.log("onChange",i()(t))},onSuccess:function(t,n,r){this.$message.success(this.$t("common.tipSuccess")),this.$router.back(-1)},onError:function(t,n,r){this.$message.error(this.$t("common.tipFailed"))},onBack:function(){this.$router.back(-1)}}},u=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",[r("div",{staticClass:"tips"},[r("p",[t._v(t._s(t.$t("application.appIcon")))])]),t._v(" "),r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:t.action,"auto-upload":!1,"on-change":t.onChange,name:"icon",multiple:!1,limit:1,"before-upload":t.beforeUpload,headers:t.headers,"on-success":t.onSuccess,"on-error":t.onError}},[r("i",{staticClass:"el-icon-upload"}),t._v(" "),r("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),r("em",[t._v("点击上传")])]),t._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("仅支持.png文件格式，且文件大小不超过64KB")])]),t._v(" "),r("el-button",{staticClass:"upload-btn",attrs:{size:"small",type:"danger"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),null!=t.url?r("div",[t._v("\r\n        如有需要，请"),r("a",{attrs:{href:t.url}},[t._v(" 点此下载")]),t._v("最新脚本文件!\r\n    ")]):t._e(),t._v(" "),r("div",{staticClass:"btn-commit"},[r("el-button",{attrs:{type:"primary"},on:{click:t.onBack}},[t._v(t._s(t.$t("common.back")))])],1)],1)},l=[],d={render:u,staticRenderFns:l},p=d,m=r("VU/8"),f=o,h=m(c,p,!1,f,"data-v-d92996ce",null);n.default=h.exports},zWsR:function(t,n,r){n=t.exports=r("FZ+f")(!1),n.push([t.i,"\n.tips[data-v-d92996ce] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.upload-demo[data-v-d92996ce] {\r\n    width: 40%;\r\n    height: 10%;\n}\n.upload-btn[data-v-d92996ce] {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\n}\n.btn-commit[data-v-d92996ce] {\r\n    text-align: center;\n}\r\n",""])}});