webpackJsonp([35],{"8Dne":function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"\n.tips[data-v-45e0802e] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.handle-box[data-v-45e0802e]{\r\n    margin-bottom: 20px;\n}\n.handle-select[data-v-45e0802e]{\r\n    width: 120px;\n}\n.handle-input[data-v-45e0802e]{\r\n    width: 300px;\r\n    display: inline-block;\n}\n.btn-commit[data-v-45e0802e] {\r\n    margin-top: 40px;\r\n    text-align: center;\n}\r\n",""])},bYax:function(t,e,i){"use strict";function o(t){i("t3FW")}Object.defineProperty(e,"__esModule",{value:!0});var a=i("UgCr"),n={data:function(){var t=this,e=function(e,i,o){var a=parseInt(i);a<10||a>86400?o(new Error(t.$t("storage.intervalHolder"))):o()},i=function(e,i,o){var a=parseInt(i);a<200||a>1e4?o(new Error(t.$t("storage.maximumHolder"))):o()};return{listLoading:!0,configId:"",configs:[],curCfgName:"",editFormVisible:!1,editLoading:!1,editFormRules:{interval:[{required:!0,message:this.$t("common.holderInput"),trigger:"blur"},{validator:e,trigger:"blur"}],maximum:[{required:!0,message:this.$t("common.holderInput"),trigger:"blur"},{validator:i,trigger:"blur"}]},editForm:{interval:"3600",maximum:"1000"}}},mounted:function(){this.updateHistoryCfg()},methods:{capFormatter:function(t,e){return t.capability.name+"("+t.capability.key+")"},updateHistoryCfg:function(){var t=this;this.listLoading=!0,this.configs=[],a.a.getAllHistoryCfg(this.$route.query.id).then(function(e){t.configs=e.data.result,t.listLoading=!1}).catch(function(e){t.listLoading=!1})},handleDelete:function(t,e){var i=this;this.$confirm(this.$t("common.toDelete"),this.$t("common.tip"),{type:"warning"}).then(function(){i.onDelete(t,e)}).catch(function(){})},onDelete:function(t,e){var i=this;this.listLoading=!0,a.a.deleteHistoryCfg(this.$route.query.id,this.configs[t].id).then(function(t){i.$message.success(i.$t("common.tipSuccess")),i.updateHistoryCfg()}).catch(function(t){i.listLoading=!1,i.$message.success(i.$t("common.tipFailed"))})},handleEdit:function(t,e){this.configId=this.configs[t].id,this.curCfgName=e.capability.name+"("+e.capability.key+")",this.editForm.interval=e.interval,this.editForm.maximum=e.maximum,this.editFormVisible=!0},editSubmit:function(t){var e=this,i=this,o=this.editForm;i.$refs[t].validate(function(t){t&&(i.editLoading=!0,a.a.changeHistoryCfg(e.$route.query.id,e.configId,o.interval,o.maximum).then(function(t){i.editLoading=!1,i.editFormVisible=!1,i.updateHistoryCfg(),e.$message.success(e.$t("common.tipSuccess"))}).catch(function(t){i.editLoading=!1,i.editFormVisible=!1}))})},onBack:function(){this.$router.back(-1)},closeDlg:function(){this.editFormVisible=!1}}},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"tips"},[i("p",[t._v(t._s(t.$t("route.tenantStorage")))])]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.configs,border:"",strip:""}},[i("el-table-column",{attrs:{type:"index",width:"40"}}),t._v(" "),i("el-table-column",{attrs:{prop:"capability",label:t.$t("storage.param"),formatter:t.capFormatter}}),t._v(" "),i("el-table-column",{attrs:{prop:"interval",label:t.$t("storage.interval")}}),t._v(" "),i("el-table-column",{attrs:{prop:"maximum",label:t.$t("storage.maximum")}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("common.operation"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button-group",[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){t.handleEdit(e.$index,e.row)}}},[t._v(t._s(t.$t("common.edit")))]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.handleDelete(e.$index,e.row)}}},[t._v(t._s(t.$t("common.delete")))])],1)]}}])})],1),t._v(" "),t.editFormVisible?i("el-dialog",{attrs:{title:t.$t("message.modifyMsgCfg"),visible:t.editFormVisible,"close-on-click-modal":!1,"before-close":t.closeDlg}},[i("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"150px",rules:t.editFormRules}},[i("el-form-item",{attrs:{label:t.$t("storage.param"),prop:"capabilityId"}},[i("el-input",{attrs:{placeholder:t.$t("storage.intervalHolder"),readonly:""},model:{value:t.curCfgName,callback:function(e){t.curCfgName=e},expression:"curCfgName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("storage.interval"),prop:"interval"}},[i("el-input",{attrs:{placeholder:t.$t("storage.intervalHolder")},model:{value:t.editForm.interval,callback:function(e){t.$set(t.editForm,"interval",e)},expression:"editForm.interval"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("storage.maximum"),prop:"maximum"}},[i("el-input",{attrs:{placeholder:t.$t("storage.maximumHolder")},model:{value:t.editForm.maximum,callback:function(e){t.$set(t.editForm,"maximum",e)},expression:"editForm.maximum"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:t.closeDlg}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"danger",loading:t.editLoading},on:{click:function(e){t.editSubmit("editForm")}}},[t._v(t._s(t.$t("common.commit")))])],1)],1):t._e(),t._v(" "),i("div",{staticClass:"btn-commit"},[i("el-button",{attrs:{type:"primary"},on:{click:t.onBack}},[t._v(t._s(t.$t("common.back")))])],1)],1)},l=[],s={render:r,staticRenderFns:l},m=s,c=i("VU/8"),d=o,u=c(n,m,!1,d,"data-v-45e0802e",null);e.default=u.exports},t3FW:function(t,e,i){var o=i("8Dne");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("50c957ae",o,!0,{})}});