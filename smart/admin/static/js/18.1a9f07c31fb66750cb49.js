webpackJsonp([18],{"5A2b":function(t,r,a){r=t.exports=a("FZ+f")(!1),r.push([t.i,"\n.tips[data-v-ae3e44a4] {\r\n    font-size: 1.2rem;\r\n    color: #314558;\r\n    margin-top: 2rem;\r\n    margin-bottom: 2rem;\n}\n.upload-demo[data-v-ae3e44a4] {\r\n    width: 40%;\r\n    height: 10%;\n}\n.upload-btn[data-v-ae3e44a4] {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\n}\n.btn-commit[data-v-ae3e44a4] {\r\n    text-align: center;\n}\r\n",""])},iDdM:function(t,r,a){var e=a("5A2b");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a("rjj0")("86f74064",e,!0,{})},oMwv:function(t,r,a){"use strict";function e(t){a("iDdM")}Object.defineProperty(r,"__esModule",{value:!0});var o=a("mvHQ"),s=a.n(o),i=a("UgCr"),n=a("TIfe"),l={data:function(){return{isError:!1,urlPortal:null,urlShare:null}},computed:{actionPortal:function(){return location.origin+"/api/product/"+this.$route.query.id+"/h5/"},actionShare:function(){return location.origin+"/api/product/"+this.$route.query.id+"/share/"},headers:function(){return{Authorization:n.a.getToken()}}},mounted:function(){var t=this;i.a.getProduct(this.$route.query.id).then(function(r){r.data.h5.length>0&&(t.urlPortal=r.data.h5),r.data.share.length>0&&(t.urlShare=r.data.share)}).catch(function(t){})},methods:{submitUpload:function(t){this.$refs[t].submit()},beforeUpload:function(t){if(this.isError)return this.isError=!1,this.$message.error(this.$t("common.fileTypeErr")),!1},onChangePortal:function(t,r){var a=this;this.isError=!1,r.forEach(function(t){var r=t.name.lastIndexOf(".");if(r>0){var e=t.name.substr(r+1);("zip"==e||"ZIP"==e)&&t.size<1048576&&t.size>0?a.isError=!1:a.isError=!0}else a.isError=!0}),this.isError&&this.$message.error(this.$t("common.fileTypeErr")),console.log("onChange",s()(t))},onChangeShare:function(t,r){var a=this;this.isError=!1,r.forEach(function(t){var r=t.name.lastIndexOf(".");if(r>0){var e=t.name.substr(r+1);("zip"==e||"ZIP"==e)&&t.size<524288&&t.size>0?a.isError=!1:a.isError=!0}else a.isError=!0}),this.isError&&this.$message.error(this.$t("common.fileTypeErr")),console.log("onChange",s()(t))},onSuccess:function(t,r,a){this.$message.success(this.$t("common.tipSuccess")),this.$router.back(-1)},onError:function(t,r,a){this.$message.error(this.$t("common.tipFailed"))},onBack:function(){this.$router.back(-1)}}},c=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",[a("div",{staticClass:"tips"},[a("p",[t._v(t._s(t.$t("product.updateH5Tip")))])]),t._v(" "),a("el-upload",{ref:"portal",staticClass:"upload-demo",attrs:{drag:"",action:t.actionPortal,"auto-upload":!1,"on-change":t.onChangePortal,name:"h5",multiple:!1,limit:1,"before-upload":t.beforeUpload,headers:t.headers,"on-success":t.onSuccess,"on-error":t.onError}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("仅支持.zip文件格式，根目录包括index.html，且文件大小不超过1MB")])]),t._v(" "),a("el-button",{staticClass:"upload-btn",attrs:{size:"small",type:"danger"},on:{click:function(r){t.submitUpload("portal")}}},[t._v("上传到服务器")]),t._v(" "),null!=t.urlPortal?a("div",[t._v("\r\n        如有需要，请"),a("a",{attrs:{href:t.urlPortal}},[t._v(" 点此下载")]),t._v("最新H5控制界面!\r\n    ")]):t._e(),t._v(" "),a("div",{staticClass:"tips"},[a("p",[t._v(t._s(t.$t("product.updateShareTip")))])]),t._v(" "),a("el-upload",{ref:"share",staticClass:"upload-demo",attrs:{drag:"",action:t.actionShare,"auto-upload":!1,"on-change":t.onChangeShare,name:"share",multiple:!1,limit:1,"before-upload":t.beforeUpload,headers:t.headers,"on-success":t.onSuccess,"on-error":t.onError}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("仅支持.zip文件格式，根目录包括index.html，且文件大小不超过512KB")])]),t._v(" "),a("el-button",{staticClass:"upload-btn",attrs:{size:"small",type:"danger"},on:{click:function(r){t.submitUpload("share")}}},[t._v("上传到服务器")]),t._v(" "),null!=t.urlShare?a("div",[t._v("\r\n        如有需要，请"),a("a",{attrs:{href:t.urlShare}},[t._v(" 点此下载")]),t._v("最新H5分享界面!\r\n    ")]):t._e(),t._v(" "),a("div",{staticClass:"btn-commit"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onBack}},[t._v(t._s(t.$t("common.back")))])],1)],1)},u=[],d={render:c,staticRenderFns:u},p=d,h=a("VU/8"),m=e,v=h(l,p,!1,m,"data-v-ae3e44a4",null);r.default=v.exports}});